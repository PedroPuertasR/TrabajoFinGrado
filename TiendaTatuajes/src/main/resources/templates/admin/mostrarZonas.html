<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="En esta página se muestra una tabla de las Zonas disponibles que pueden ser tatuadas, además
	podemos acceder a través de los diferentes botones al formulario para añadir o editar las zonas. También podemos eliminar
	zonas.">
	<meta name="author" content="Pedro Puertas Rodríguez">

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" />

	<link rel="stylesheet" href="../../static/css/main.css" th:href="@{/css/main.css}" media="screen" type="text/css" />

	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.2/font/bootstrap-icons.css">

	<script src="https://code.jquery.com/jquery-3.3.1.min.js" th:src="@{/webjars/jquery/jquery.min.js}"></script>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

	<title>Mostrar zonas Brew Tattoos</title>
</head>

<body>
	<main>
		<nav th:replace="~{fragmentos/navbarAdmin::navbar}"></nav>

		<article class="mt-5">
			<div class="container table-responsive mt-3">

				<p th:if="${param.error}" class="error text-danger text-center">
					No puede borrar la zona porque tiene reservas asociadas.
				</p>

				<h2 class="text-light text-center mb-3">Zonas</h2>

				<div class="form-buscar p-0 mb-3 me-0 ms-0 d-flex flex-row">
					<form class="formularioBuscar" method="GET" th:action="@{/admin/zonas/buscar}">
						<input class="rounded" type="text" placeholder="Precio de la zona" name="precio" id="precio"
							th:value="${param.precio}" />
						<button type="submit" class="btn btn-light btn-enviar me-0">Buscar</button>
					</form>

					<a class="btn btn-success" href="#" th:href="@{/admin/nuevaZona}">
						<i class="bi bi-plus-square"></i>
					</a>
				</div>

				<div class="container table-responsive">
					<table class="table table-dark table-hover">
						<thead>
							<tr>
								<th>Zona</th>
								<th>Precio de fianza</th>
								<th>Operaciones</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="zona : ${listaZona}">
								<td th:text="${zona.nombreZona}">Nombre</td>
								<td th:text="${zona.PrecioFianza}">Precio</td>
								<td>
									<a class="btn btn-warning" href="#"
										th:href="@{/admin/editarZona/{id}(id=${zona.id})}">
										<i class="bi bi-pencil"></i>
									</a> |
									<button type="button" class="btn btn-danger" data-bs-toggle="modal"
										data-bs-target="#myModal" th:attr="data-bs-target='#myModal' + ${zona.id}">
										<i class="bi bi-x-square"></i>
									</button>

									<!-- Modal -->
									<div class="modal fade" id="myModal" th:id="'myModal' + ${zona.id}" tabindex="-1"
										aria-labelledby="myModalLabel" aria-hidden="true">
										<div class="modal-dialog">
											<div class="modal-content">
												<div class="modal-header bg-dark">
													<h5 class="modal-title" id="myModalLabel">¿Está seguro de borrar
														esta zona?</h5>
													<button type="button" class="btn-close" data-bs-dismiss="modal"
														aria-label="Close"></button>
												</div>
												<div class="modal-body bg-dark">
												</div>
												<div class="modal-footer bg-dark">
													<a class="btn btn-danger" th:href="@{/admin/zonas}">No</a>
													<a class="btn btn-success"
														th:href="@{/admin/borrarZona/{id}(id=${zona.id})}">Sí</a>
												</div>
											</div>
										</div>
									</div>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</article>



	</main>
</body>

</html>